---
title: "WRITE-UP_Taxi-Analysis"
author: "Steven Chao"
date: "10/12/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Write a roughly 10-page (definitely no more than 4000 words) summary of the research and EDA process of your project. The summary should be prepared in R-markdown, and knitted into HTML. You may take some of the work in part B (such as graphs and results) to include here. They can overlap. This summary is to-be presented to your boss, your client, or to-be submitted for publication in journals. Potential area of topics to address in this summary may include:

#******EACH PERSON SHOULD WRITE ABOUT 600-700 WORDS!!!!!!*******
#*******MAKE SURE TO ADD SOME GRAPHS AND CHARTS************

#Introduction
Taxi cabs are an integral part of the New York City experience. Widely recognized by their yellow color and checkered boxes, there are roughly 13,500 taxi cabs in service today. The popularity of taxi cabs have come under siege recently with the growing popularity and use of competiting ride-hailing services such as Lyft and Uber. There are 80,000 of these cars in New York City, with 50,000 drivers serving 236 million passengers per year. Tips are an important part of the service industry. Thus, knowing the likelihood and the amount of tips have the potential to provide greater financial certainty for workers. Devaraj and Patel note that these taxi cabs are worth $800,000 each. Taxi cab data can also provide valuable information on city life, city culture, human behavior, and various socioeconomic variables such as economic activity.

##What analysis has already been completed related to the content in your dataset? -Steven
What are tips
Tips can be defined as voluntary payments usually in the form of money—in addition to the obligatory transaction amount—from the customer to service worker who performs a service for them (Cunningham). Tipping is an integral part of the service sector in the US, which generated about xXXX billion in tips in YEAR. 

What influences tips

In short, tipping behavior can be explained by both economic and noneconomic factors (Devaraj & Patel).

However, Devaraj and Patel argue that these factors have less influence in a taxi setting g
##How did the research you gathered contribute to your question development? - Steven
In this context, given the circumstances of taxicab tipping, this project seeks to identify if there are other factors other than weather that may affect the amount of tipping. If weather has the potential to affect behavior, there may be other factors, such as economic variables, that may affect a person’s behavior and thus the amount they choose to tip.
iven the standardized nature of the taxicab service and the minimal interaction between the driver and the passengers.
Various factors have been claimed to affect taxicab tipping. For instance, Devaraj and Patel (2017) argue that taxicab tipping is associated with weather. While the relationship was small, it was statistically significant: The sunnier the weather, the greater amount of tipping. Alternatively, Flynn and Greenberg (date) disagree, saying that there is no statistically significant relationship between the two variables. They instead argue that tipping is an “institutional […] norm, rather than as a prosocial behavior that can be modulated by weather-induced changes in mood.”


##How was the information gathered? - Madhuri
##What do we know about this dataset? - Madhuri
##preprocessing part - Madhuri- 
sampeling, provide some graphs and charts

The source dataset used for the project was taken from https://www1.nyc.gov/

Source: https://www1.nyc.gov/site/tlc/about/tlc-trip-record-data.page

  The New York City Taxi and Limousine Commission (TLC), was created in 1971.  The agency is responsible for licensing and regulating New York City's Medallion (Yellow) taxi cabs, for-hire vehicles (community-based liveries, black cars and luxury limousines), commuter vans, and paratransit vehicles. The datasets were collected and provided to the agency by technology providers authorized under the Taxicab & Livery Passenger Enhancement Programs (TPEP/LPEP). 
  
  The dataset is available for Yellow Taxi, Green Taxi and For-Hire Vehicle Records from 2009 till date. The total size of the complete dataset is around 10 GB. We have randomly selected 20000 observations from the latest dataset ie 2019 June from Yellow Taxi Records. due to hardware limitations, which have prevented us from analyzing the entire dataset.

  Before preprocessing we have 20,000 observations and 19 features. To bring the dataset to our EDA standards we performed preprocessing on it, thins involved column creations, outlier detection and treatment. 

  A normal distribution is often an assumption for many statistical analyses. Generally. raw tip amounts vary because the fare amounts vary. One factor that may not necessarily vary is tipping percentage. In the US, there is often a standardized percentage that a customer gives (for example, 15% at restaurants). We divided the fare amount by the tip amount to obtain a tipping percentage.
  
  The dataset provides a location ID that corresponds to a taxi zone in each of the five boroughs. These nominal variables do not provide much value in its integer format since we do not know the geographical locations of each location ID. We downloaded a taxi zone and ID dataset that provides the boroughs for each location ID. The dataset also indicates the specific neighborhoods within each borough. We merged that dataset to the taxi dataset to identify the borough for both pick up and drop off.
  
  Pickup and Dropoff was in datetime format we changed it to categorical data with 4 values involving division of day into 4 major periods namely “Morning”, “Afternoon”, “Evening” or “Night”. Further we also calculated the trip duration in minutes based on these two columns, for our analysis.

To summarize after removing outliers and creating new features we have 11881 observations and 33 features. 

##What are the limitations of the dataset? - Amna
Like every other data set, our data has also some limitations which may impact the results of our study.
<ul>
  <li>Hardware Limitations: The data that is publicly made available by the NYC Taxi and Limousine Commission dates back to only ten years. Initially we tried to incorporate all of this data for statistical testing but it was too large to be tested on our personal computers. Even data for a single year exceeded 12 Gbs causing our machines to crash or hang when trying to run it in R, so we narrowed it down to just 20,000 observations from the month of June 2019 for yellow taxi tip records (the latest available data). Since our observations span only a short period of time, therefore the results obtained from our research can not be generalized for longer period of times.
  <li>Non-Normality of Tipping data: Normally distributed data is a basic requirement when it comes to applying statistical tools, t-tests and the analysis of variance (ANOVA) etc. Our dependent variable i.e. Amount tipped is not exactly normally distributed. So we tried to address this issue in the following ways:
    <ul>
      <li>Removing extreme values and outliers that were causing our distribution to be abnormally skewed.
      <li>Central Limit Theorem (CLT) states that sample means of moderately large samples are often well-approximated by a normal distribution even if the data is not normally distributed. Our dataset contains a significant amount of observations thus qualifying it to be approximately normal under CLT. 
      <li>No Cash Tip data provided: The data available contains tip amounts payed through Credit Card mode only. There might be observations where Tip amount column contains a value of zero when in reality the driver of cab was presented with tip in cash mode but since it was not recorded in data collected by TLC so we cannot be sure and consequently rendering our data to be incomplete. 
      </ul>
  <li>Limited Time and resources: We chose to work on only four features affecting the variation in the tipping amount but there could be a plethora of other reasons too. For example weather. A bright sunny and breezy day would encourage short distance commuters to walk to their destinations instead of using cab service altogether or it might positively impact the mood of the taxi passengers inclining them to tip more. But limited time restricted us to work only on few of data points available.
  <li>Human Errors in Data set: Some of the columns in our data set are prone to human errors. For example, passenger count (the number of passengers in the vehicle) is driver entered value and  might have the potential of some observations being inaccurately recorded.
</ul>


##How did your question change, if at all, after Exploratory Data Analysis? - Tanaya
Initial question
-not normal, so we changed to tip amount
-because only credit card tips, we changed our question to focus only on credit card tips

-put updated research questions here

from COMBINED file

QUESTION: For those who pay tip by credit card, what factors influence the amount of tip given?
Should you pay tip to the taxi driver? If yes, how much?

Analyse the factors which takes place to determine the tip amount paid to the driver

Why?
Benefits?
Use?

Hypothesis:
Factors that can affect tip amount:
1. Vendor service
2. Driver service
3. Location :  (generous locations)
4. duration of day 
5. distance
6. count of passengers
7. weather
```{r cars}
summary(cars)
```
##What additional information would be beneficial? - Amna

The results obtained by our team can be significantly improved and made more reliable if we were able to gather more features to consider. For instance:
<ul>
  <li>Driver ratings: If TLC was able to gather data on how well-rated each Yellow Cab driver is in NYC based on feedback provided by passenger(s). This rating system itself could involve various factors like cleanliness level of vehicle interior, friendliness/politeness level of driver etc. thus allowing us to find the correlation between amount tipped to good rated drivers versus not so good rated drivers.
  <li>Weather data: Common sense tells us that rainy or snowy weather is going to encourage more people to opt for cab hailing services than on normal days. From that data we could have applied statistical techniques to infer whether the change in season also affects the tipping behavior of the passengers or not. 
  <li>Geographical Coordinates: The availability of geographical coordinates data would not only have led us to pinpoint the exact localities/neighborhoods to figure out the tipping intention based on different demographics but also projected this data in the form of visually appealing maps.
  <li>Gender Dynamics, Personality type, Mood: These factors due to their qualitative nature receive limited attention as predictor of tipping behavior but we believe that can also serve to play an important part in tipping behavior.
</ul>

##Based on EDA can you begin to sketch out an answer to your question? - EVERYONE ON SUNDAY